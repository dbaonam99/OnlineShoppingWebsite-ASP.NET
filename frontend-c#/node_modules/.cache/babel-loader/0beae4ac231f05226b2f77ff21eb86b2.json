{"ast":null,"code":"import { OrderedSet, is } from 'immutable';\nexport var EMPTY_SET = new OrderedSet();\nexport default function getEntityRanges(text, charMetaList) {\n  var charEntity = null;\n  var prevCharEntity = null;\n  var ranges = [];\n  var rangeStart = 0;\n\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharEntity = charEntity;\n    var meta = charMetaList.get(i);\n    charEntity = meta ? meta.getEntity() : null;\n\n    if (i > 0 && charEntity !== prevCharEntity) {\n      ranges.push([prevCharEntity, getStyleRanges(text.slice(rangeStart, i), charMetaList.slice(rangeStart, i))]);\n      rangeStart = i;\n    }\n  }\n\n  ranges.push([charEntity, getStyleRanges(text.slice(rangeStart), charMetaList.slice(rangeStart))]);\n  return ranges;\n}\n\nfunction getStyleRanges(text, charMetaList) {\n  var charStyle = EMPTY_SET;\n  var prevCharStyle = EMPTY_SET;\n  var ranges = [];\n  var rangeStart = 0;\n\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharStyle = charStyle;\n    var meta = charMetaList.get(i);\n    charStyle = meta ? meta.getStyle() : EMPTY_SET;\n\n    if (i > 0 && !is(charStyle, prevCharStyle)) {\n      ranges.push([text.slice(rangeStart, i), prevCharStyle]);\n      rangeStart = i;\n    }\n  }\n\n  ranges.push([text.slice(rangeStart), charStyle]);\n  return ranges;\n}","map":{"version":3,"sources":["/Users/namduong/Projects/frontend-c#/node_modules/draft-js-utils/esm/getEntityRanges.js"],"names":["OrderedSet","is","EMPTY_SET","getEntityRanges","text","charMetaList","charEntity","prevCharEntity","ranges","rangeStart","i","len","length","meta","get","getEntity","push","getStyleRanges","slice","charStyle","prevCharStyle","getStyle"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,EAArB,QAA+B,WAA/B;AACA,OAAO,IAAIC,SAAS,GAAG,IAAIF,UAAJ,EAAhB;AACP,eAAe,SAASG,eAAT,CAAyBC,IAAzB,EAA+BC,YAA/B,EAA6C;AAC1D,MAAIC,UAAU,GAAG,IAAjB;AACA,MAAIC,cAAc,GAAG,IAArB;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,UAAU,GAAG,CAAjB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGP,IAAI,CAACQ,MAA3B,EAAmCF,CAAC,GAAGC,GAAvC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/CH,IAAAA,cAAc,GAAGD,UAAjB;AACA,QAAIO,IAAI,GAAGR,YAAY,CAACS,GAAb,CAAiBJ,CAAjB,CAAX;AACAJ,IAAAA,UAAU,GAAGO,IAAI,GAAGA,IAAI,CAACE,SAAL,EAAH,GAAsB,IAAvC;;AAEA,QAAIL,CAAC,GAAG,CAAJ,IAASJ,UAAU,KAAKC,cAA5B,EAA4C;AAC1CC,MAAAA,MAAM,CAACQ,IAAP,CAAY,CAACT,cAAD,EAAiBU,cAAc,CAACb,IAAI,CAACc,KAAL,CAAWT,UAAX,EAAuBC,CAAvB,CAAD,EAA4BL,YAAY,CAACa,KAAb,CAAmBT,UAAnB,EAA+BC,CAA/B,CAA5B,CAA/B,CAAZ;AACAD,MAAAA,UAAU,GAAGC,CAAb;AACD;AACF;;AAEDF,EAAAA,MAAM,CAACQ,IAAP,CAAY,CAACV,UAAD,EAAaW,cAAc,CAACb,IAAI,CAACc,KAAL,CAAWT,UAAX,CAAD,EAAyBJ,YAAY,CAACa,KAAb,CAAmBT,UAAnB,CAAzB,CAA3B,CAAZ;AACA,SAAOD,MAAP;AACD;;AAED,SAASS,cAAT,CAAwBb,IAAxB,EAA8BC,YAA9B,EAA4C;AAC1C,MAAIc,SAAS,GAAGjB,SAAhB;AACA,MAAIkB,aAAa,GAAGlB,SAApB;AACA,MAAIM,MAAM,GAAG,EAAb;AACA,MAAIC,UAAU,GAAG,CAAjB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGP,IAAI,CAACQ,MAA3B,EAAmCF,CAAC,GAAGC,GAAvC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/CU,IAAAA,aAAa,GAAGD,SAAhB;AACA,QAAIN,IAAI,GAAGR,YAAY,CAACS,GAAb,CAAiBJ,CAAjB,CAAX;AACAS,IAAAA,SAAS,GAAGN,IAAI,GAAGA,IAAI,CAACQ,QAAL,EAAH,GAAqBnB,SAArC;;AAEA,QAAIQ,CAAC,GAAG,CAAJ,IAAS,CAACT,EAAE,CAACkB,SAAD,EAAYC,aAAZ,CAAhB,EAA4C;AAC1CZ,MAAAA,MAAM,CAACQ,IAAP,CAAY,CAACZ,IAAI,CAACc,KAAL,CAAWT,UAAX,EAAuBC,CAAvB,CAAD,EAA4BU,aAA5B,CAAZ;AACAX,MAAAA,UAAU,GAAGC,CAAb;AACD;AACF;;AAEDF,EAAAA,MAAM,CAACQ,IAAP,CAAY,CAACZ,IAAI,CAACc,KAAL,CAAWT,UAAX,CAAD,EAAyBU,SAAzB,CAAZ;AACA,SAAOX,MAAP;AACD","sourcesContent":["import { OrderedSet, is } from 'immutable';\nexport var EMPTY_SET = new OrderedSet();\nexport default function getEntityRanges(text, charMetaList) {\n  var charEntity = null;\n  var prevCharEntity = null;\n  var ranges = [];\n  var rangeStart = 0;\n\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharEntity = charEntity;\n    var meta = charMetaList.get(i);\n    charEntity = meta ? meta.getEntity() : null;\n\n    if (i > 0 && charEntity !== prevCharEntity) {\n      ranges.push([prevCharEntity, getStyleRanges(text.slice(rangeStart, i), charMetaList.slice(rangeStart, i))]);\n      rangeStart = i;\n    }\n  }\n\n  ranges.push([charEntity, getStyleRanges(text.slice(rangeStart), charMetaList.slice(rangeStart))]);\n  return ranges;\n}\n\nfunction getStyleRanges(text, charMetaList) {\n  var charStyle = EMPTY_SET;\n  var prevCharStyle = EMPTY_SET;\n  var ranges = [];\n  var rangeStart = 0;\n\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharStyle = charStyle;\n    var meta = charMetaList.get(i);\n    charStyle = meta ? meta.getStyle() : EMPTY_SET;\n\n    if (i > 0 && !is(charStyle, prevCharStyle)) {\n      ranges.push([text.slice(rangeStart, i), prevCharStyle]);\n      rangeStart = i;\n    }\n  }\n\n  ranges.push([text.slice(rangeStart), charStyle]);\n  return ranges;\n}"]},"metadata":{},"sourceType":"module"}