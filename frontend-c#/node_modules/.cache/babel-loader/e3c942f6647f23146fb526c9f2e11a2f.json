{"ast":null,"code":"function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport replaceTextWithMeta from './lib/replaceTextWithMeta';\nimport { CharacterMetadata, ContentBlock, ContentState, genKey } from 'draft-js';\nimport { List, Map, OrderedSet, Repeat, Seq } from 'immutable';\nimport { BLOCK_TYPE, ENTITY_TYPE, INLINE_STYLE } from 'draft-js-utils';\nimport { NODE_TYPE_ELEMENT, NODE_TYPE_TEXT } from 'synthetic-dom';\nimport { INLINE_ELEMENTS, SPECIAL_ELEMENTS, SELF_CLOSING_ELEMENTS } from './lib/Constants';\nvar DATA_URL = /^data:/i;\nvar NO_STYLE = OrderedSet();\nvar NO_ENTITY = null;\nvar EMPTY_BLOCK = new ContentBlock({\n  key: genKey(),\n  text: '',\n  type: BLOCK_TYPE.UNSTYLED,\n  characterList: List(),\n  depth: 0\n});\nvar LINE_BREAKS = /(\\r\\n|\\r|\\n)/g; // We use `\\r` because that character is always stripped from source (normalized\n// to `\\n`), so it's safe to assume it will only appear in the text content when\n// we put it there as a placeholder.\n\nvar SOFT_BREAK_PLACEHOLDER = '\\r';\nvar ZERO_WIDTH_SPACE = \"\\u200B\";\nvar DATA_ATTRIBUTE = /^data-([a-z0-9-]+)$/; // Map element attributes to entity data.\n\nvar ELEM_ATTR_MAP = {\n  a: {\n    href: 'url',\n    rel: 'rel',\n    target: 'target',\n    title: 'title'\n  },\n  img: {\n    src: 'src',\n    alt: 'alt',\n    width: 'width',\n    height: 'height'\n  }\n};\n\nvar getEntityData = function getEntityData(tagName, element) {\n  var data = {};\n\n  if (ELEM_ATTR_MAP.hasOwnProperty(tagName)) {\n    var attrMap = ELEM_ATTR_MAP[tagName];\n\n    for (var i = 0; i < element.attributes.length; i++) {\n      var _element$attributes$i = element.attributes[i],\n          name = _element$attributes$i.name,\n          value = _element$attributes$i.value;\n\n      if (typeof value === 'string') {\n        var strVal = value;\n\n        if (attrMap.hasOwnProperty(name)) {\n          var newName = attrMap[name];\n          data[newName] = strVal;\n        } else if (DATA_ATTRIBUTE.test(name)) {\n          data[name] = strVal;\n        }\n      }\n    }\n  }\n\n  return data;\n}; // Functions to create entities from elements.\n\n\nvar ElementToEntity = {\n  a: function a(generator, tagName, element) {\n    var data = getEntityData(tagName, element); // Don't add `<a>` elements with invalid href.\n\n    if (isAllowedHref(data.url)) {\n      return generator.createEntity(ENTITY_TYPE.LINK, data);\n    }\n  },\n  img: function img(generator, tagName, element) {\n    var data = getEntityData(tagName, element); // Don't add `<img>` elements with no src.\n\n    if (data.src != null) {\n      return generator.createEntity(ENTITY_TYPE.IMAGE, data);\n    }\n  }\n};\n\nvar ContentGenerator = /*#__PURE__*/function () {\n  // This will be passed to the customInlineFn to allow it\n  // to return a Style() or Entity().\n  function ContentGenerator() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ContentGenerator);\n\n    _defineProperty(this, \"contentStateForEntities\", void 0);\n\n    _defineProperty(this, \"blockStack\", void 0);\n\n    _defineProperty(this, \"blockList\", void 0);\n\n    _defineProperty(this, \"depth\", void 0);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"inlineCreators\", {\n      Style: function (_Style) {\n        function Style(_x) {\n          return _Style.apply(this, arguments);\n        }\n\n        Style.toString = function () {\n          return _Style.toString();\n        };\n\n        return Style;\n      }(function (style) {\n        return {\n          type: 'STYLE',\n          style: style\n        };\n      }),\n      Entity: function Entity(type, data) {\n        var mutability = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'MUTABLE';\n        return {\n          type: 'ENTITY',\n          entityKey: _this.createEntity(type, toStringMap(data), mutability)\n        };\n      }\n    });\n\n    this.options = options;\n    this.contentStateForEntities = ContentState.createFromBlockArray([]); // This represents the hierarchy as we traverse nested elements; for\n    // example [body, ul, li] where we must know li's parent type (ul or ol).\n\n    this.blockStack = []; // This is a linear list of blocks that will form the output; for example\n    // [p, li, li, blockquote].\n\n    this.blockList = [];\n    this.depth = 0;\n  }\n\n  _createClass(ContentGenerator, [{\n    key: \"process\",\n    value: function process(element) {\n      this.processBlockElement(element);\n      var contentBlocks = [];\n      this.blockList.forEach(function (block) {\n        var _concatFragments = concatFragments(block.textFragments),\n            text = _concatFragments.text,\n            characterMeta = _concatFragments.characterMeta;\n\n        var includeEmptyBlock = false; // If the block contains only a soft break then don't discard the block,\n        // but discard the soft break.\n\n        if (text === SOFT_BREAK_PLACEHOLDER) {\n          includeEmptyBlock = true;\n          text = '';\n        }\n\n        if (block.tagName === 'pre') {\n          var _trimLeadingNewline = trimLeadingNewline(text, characterMeta);\n\n          text = _trimLeadingNewline.text;\n          characterMeta = _trimLeadingNewline.characterMeta;\n        } else {\n          var _collapseWhiteSpace = collapseWhiteSpace(text, characterMeta);\n\n          text = _collapseWhiteSpace.text;\n          characterMeta = _collapseWhiteSpace.characterMeta;\n        } // Previously we were using a placeholder for soft breaks. Now that we\n        // have collapsed whitespace we can change it back to normal line breaks.\n\n\n        text = text.split(SOFT_BREAK_PLACEHOLDER).join('\\n'); // Discard empty blocks (unless otherwise specified).\n\n        if (text.length || includeEmptyBlock) {\n          contentBlocks.push(new ContentBlock({\n            key: genKey(),\n            text: text,\n            type: block.type,\n            characterList: characterMeta.toList(),\n            depth: block.depth,\n            data: block.data ? Map(block.data) : Map()\n          }));\n        }\n      });\n\n      if (!contentBlocks.length) {\n        contentBlocks = [EMPTY_BLOCK];\n      }\n\n      return ContentState.createFromBlockArray(contentBlocks, this.contentStateForEntities.getEntityMap());\n    }\n  }, {\n    key: \"getBlockTypeFromTagName\",\n    value: function getBlockTypeFromTagName(tagName) {\n      var blockTypes = this.options.blockTypes;\n\n      if (blockTypes && blockTypes[tagName]) {\n        return blockTypes[tagName];\n      }\n\n      switch (tagName) {\n        case 'li':\n          {\n            var parent = this.blockStack.slice(-1)[0];\n            return parent.tagName === 'ol' ? BLOCK_TYPE.ORDERED_LIST_ITEM : BLOCK_TYPE.UNORDERED_LIST_ITEM;\n          }\n\n        case 'blockquote':\n          {\n            return BLOCK_TYPE.BLOCKQUOTE;\n          }\n\n        case 'h1':\n          {\n            return BLOCK_TYPE.HEADER_ONE;\n          }\n\n        case 'h2':\n          {\n            return BLOCK_TYPE.HEADER_TWO;\n          }\n\n        case 'h3':\n          {\n            return BLOCK_TYPE.HEADER_THREE;\n          }\n\n        case 'h4':\n          {\n            return BLOCK_TYPE.HEADER_FOUR;\n          }\n\n        case 'h5':\n          {\n            return BLOCK_TYPE.HEADER_FIVE;\n          }\n\n        case 'h6':\n          {\n            return BLOCK_TYPE.HEADER_SIX;\n          }\n\n        case 'pre':\n          {\n            return BLOCK_TYPE.CODE;\n          }\n\n        case 'figure':\n          {\n            return BLOCK_TYPE.ATOMIC;\n          }\n\n        default:\n          {\n            return BLOCK_TYPE.UNSTYLED;\n          }\n      }\n    }\n  }, {\n    key: \"processBlockElement\",\n    value: function processBlockElement(element) {\n      if (!element) {\n        return;\n      }\n\n      var customBlockFn = this.options.customBlockFn;\n      var tagName = element.nodeName.toLowerCase();\n      var type;\n      var data;\n\n      if (customBlockFn) {\n        var customBlock = customBlockFn(element);\n\n        if (customBlock != null) {\n          type = customBlock.type;\n          data = customBlock.data;\n        }\n      }\n\n      var isCustomType = true;\n\n      if (type == null) {\n        isCustomType = false;\n        type = this.getBlockTypeFromTagName(tagName);\n      }\n\n      if (type === BLOCK_TYPE.CODE) {\n        var language = element.getAttribute('data-language');\n\n        if (language) {\n          data = _objectSpread({}, data, {\n            language: language\n          });\n        }\n      }\n\n      var hasDepth = canHaveDepth(type);\n      var allowRender = !SPECIAL_ELEMENTS.hasOwnProperty(tagName);\n\n      if (!isCustomType && !hasSemanticMeaning(type)) {\n        var parent = this.blockStack.slice(-1)[0];\n\n        if (parent) {\n          type = parent.type;\n        }\n      }\n\n      var block = {\n        tagName: tagName,\n        textFragments: [],\n        type: type,\n        styleStack: [NO_STYLE],\n        entityStack: [NO_ENTITY],\n        depth: hasDepth ? this.depth : 0,\n        data: data\n      };\n\n      if (allowRender) {\n        this.blockList.push(block);\n\n        if (hasDepth) {\n          this.depth += 1;\n        }\n      }\n\n      this.blockStack.push(block);\n\n      if (element.childNodes != null) {\n        Array.from(element.childNodes).forEach(this.processNode, this);\n      }\n\n      this.blockStack.pop();\n\n      if (allowRender && hasDepth) {\n        this.depth -= 1;\n      }\n    }\n  }, {\n    key: \"processInlineElement\",\n    value: function processInlineElement(element) {\n      var tagName = element.nodeName.toLowerCase();\n\n      if (tagName === 'br') {\n        this.processText(SOFT_BREAK_PLACEHOLDER);\n        return;\n      }\n\n      var block = this.blockStack.slice(-1)[0];\n      var style = block.styleStack.slice(-1)[0];\n      var entityKey = block.entityStack.slice(-1)[0];\n      var customInlineFn = this.options.customInlineFn;\n      var customInline = customInlineFn ? customInlineFn(element, this.inlineCreators) : null;\n\n      if (customInline != null) {\n        switch (customInline.type) {\n          case 'STYLE':\n            {\n              style = style.add(customInline.style);\n              break;\n            }\n\n          case 'ENTITY':\n            {\n              entityKey = customInline.entityKey;\n              break;\n            }\n        }\n      } else {\n        style = addStyleFromTagName(style, tagName, this.options.elementStyles);\n\n        if (ElementToEntity.hasOwnProperty(tagName)) {\n          // If the to-entity function returns nothing, use the existing entity.\n          entityKey = ElementToEntity[tagName](this, tagName, element) || entityKey;\n        }\n      }\n\n      block.styleStack.push(style);\n      block.entityStack.push(entityKey);\n\n      if (element.childNodes != null) {\n        Array.from(element.childNodes).forEach(this.processNode, this);\n      }\n\n      if (SELF_CLOSING_ELEMENTS.hasOwnProperty(tagName)) {\n        this.processText(\"\\xA0\");\n      }\n\n      block.entityStack.pop();\n      block.styleStack.pop();\n    }\n  }, {\n    key: \"processTextNode\",\n    value: function processTextNode(node) {\n      var text = node.nodeValue; // This is important because we will use \\r as a placeholder for a soft break.\n\n      text = text.replace(LINE_BREAKS, '\\n'); // Replace zero-width space (we use it as a placeholder in markdown) with a\n      // soft break.\n      // TODO: The import-markdown package should correctly turn breaks into <br>\n      // elements so we don't need to include this hack.\n\n      text = text.split(ZERO_WIDTH_SPACE).join(SOFT_BREAK_PLACEHOLDER);\n      this.processText(text);\n    }\n  }, {\n    key: \"processText\",\n    value: function processText(text) {\n      var block = this.blockStack.slice(-1)[0];\n      var style = block.styleStack.slice(-1)[0];\n      var entity = block.entityStack.slice(-1)[0];\n      var charMetadata = CharacterMetadata.create({\n        style: style,\n        entity: entity\n      });\n      var seq = Repeat(charMetadata, text.length);\n      block.textFragments.push({\n        text: text,\n        characterMeta: seq\n      });\n    }\n  }, {\n    key: \"processNode\",\n    value: function processNode(node) {\n      if (node.nodeType === NODE_TYPE_ELEMENT) {\n        // $FlowIssue\n        var _element = node;\n\n        var _tagName = _element.nodeName.toLowerCase();\n\n        if (INLINE_ELEMENTS.hasOwnProperty(_tagName)) {\n          this.processInlineElement(_element);\n        } else {\n          this.processBlockElement(_element);\n        }\n      } else if (node.nodeType === NODE_TYPE_TEXT) {\n        this.processTextNode(node);\n      }\n    }\n  }, {\n    key: \"createEntity\",\n    value: function createEntity(type, data) {\n      var mutability = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'MUTABLE';\n      this.contentStateForEntities = this.contentStateForEntities.createEntity(type, mutability, data);\n      return this.contentStateForEntities.getLastCreatedEntityKey();\n    }\n  }]);\n\n  return ContentGenerator;\n}();\n\nfunction trimLeadingNewline(text, characterMeta) {\n  if (text.charAt(0) === '\\n') {\n    text = text.slice(1);\n    characterMeta = characterMeta.slice(1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction trimLeadingSpace(text, characterMeta) {\n  while (text.charAt(0) === ' ') {\n    text = text.slice(1);\n    characterMeta = characterMeta.slice(1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction trimTrailingSpace(text, characterMeta) {\n  while (text.slice(-1) === ' ') {\n    text = text.slice(0, -1);\n    characterMeta = characterMeta.slice(0, -1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction collapseWhiteSpace(text, characterMeta) {\n  text = text.replace(/[ \\t\\n]/g, ' ');\n\n  var _trimLeadingSpace = trimLeadingSpace(text, characterMeta);\n\n  text = _trimLeadingSpace.text;\n  characterMeta = _trimLeadingSpace.characterMeta;\n\n  var _trimTrailingSpace = trimTrailingSpace(text, characterMeta);\n\n  text = _trimTrailingSpace.text;\n  characterMeta = _trimTrailingSpace.characterMeta;\n  var i = text.length;\n\n  while (i--) {\n    if (text.charAt(i) === ' ' && text.charAt(i - 1) === ' ') {\n      text = text.slice(0, i) + text.slice(i + 1);\n      characterMeta = characterMeta.slice(0, i).concat(characterMeta.slice(i + 1));\n    }\n  } // There could still be one space on either side of a softbreak.\n\n\n  var _replaceTextWithMeta = replaceTextWithMeta({\n    text: text,\n    characterMeta: characterMeta\n  }, SOFT_BREAK_PLACEHOLDER + ' ', SOFT_BREAK_PLACEHOLDER);\n\n  text = _replaceTextWithMeta.text;\n  characterMeta = _replaceTextWithMeta.characterMeta;\n\n  var _replaceTextWithMeta2 = replaceTextWithMeta({\n    text: text,\n    characterMeta: characterMeta\n  }, ' ' + SOFT_BREAK_PLACEHOLDER, SOFT_BREAK_PLACEHOLDER);\n\n  text = _replaceTextWithMeta2.text;\n  characterMeta = _replaceTextWithMeta2.characterMeta;\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction canHaveDepth(blockType) {\n  switch (blockType) {\n    case BLOCK_TYPE.UNORDERED_LIST_ITEM:\n    case BLOCK_TYPE.ORDERED_LIST_ITEM:\n      {\n        return true;\n      }\n\n    default:\n      {\n        return false;\n      }\n  }\n}\n\nfunction concatFragments(fragments) {\n  var text = '';\n  var characterMeta = Seq();\n  fragments.forEach(function (textFragment) {\n    text = text + textFragment.text;\n    characterMeta = characterMeta.concat(textFragment.characterMeta);\n  });\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction addStyleFromTagName(styleSet, tagName, elementStyles) {\n  switch (tagName) {\n    case 'b':\n    case 'strong':\n      {\n        return styleSet.add(INLINE_STYLE.BOLD);\n      }\n\n    case 'i':\n    case 'em':\n      {\n        return styleSet.add(INLINE_STYLE.ITALIC);\n      }\n\n    case 'u':\n    case 'ins':\n      {\n        return styleSet.add(INLINE_STYLE.UNDERLINE);\n      }\n\n    case 'code':\n      {\n        return styleSet.add(INLINE_STYLE.CODE);\n      }\n\n    case 's':\n    case 'del':\n      {\n        return styleSet.add(INLINE_STYLE.STRIKETHROUGH);\n      }\n\n    default:\n      {\n        // Allow custom styles to be provided.\n        if (elementStyles && elementStyles[tagName]) {\n          return styleSet.add(elementStyles[tagName]);\n        }\n\n        return styleSet;\n      }\n  }\n}\n\nfunction hasSemanticMeaning(blockType) {\n  return blockType !== BLOCK_TYPE.UNSTYLED;\n}\n\nfunction toStringMap(input) {\n  var result = {};\n\n  if (input !== null && _typeof(input) === 'object' && !Array.isArray(input)) {\n    var obj = input;\n\n    for (var _i = 0, _Object$keys = Object.keys(obj); _i < _Object$keys.length; _i++) {\n      var _key = _Object$keys[_i];\n      var value = obj[_key];\n\n      if (typeof value === 'string') {\n        result[_key] = value;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction isAllowedHref(input) {\n  if (input == null || input.match(DATA_URL)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function stateFromElement(element, options) {\n  return new ContentGenerator(options).process(element);\n}\nexport default stateFromElement;","map":{"version":3,"sources":["/Users/namduong/Projects/frontend-c#/node_modules/draft-js-import-element/esm/stateFromElement.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","push","apply","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","replaceTextWithMeta","CharacterMetadata","ContentBlock","ContentState","genKey","List","Map","OrderedSet","Repeat","Seq","BLOCK_TYPE","ENTITY_TYPE","INLINE_STYLE","NODE_TYPE_ELEMENT","NODE_TYPE_TEXT","INLINE_ELEMENTS","SPECIAL_ELEMENTS","SELF_CLOSING_ELEMENTS","DATA_URL","NO_STYLE","NO_ENTITY","EMPTY_BLOCK","text","type","UNSTYLED","characterList","depth","LINE_BREAKS","SOFT_BREAK_PLACEHOLDER","ZERO_WIDTH_SPACE","DATA_ATTRIBUTE","ELEM_ATTR_MAP","a","href","rel","title","img","src","alt","width","height","getEntityData","tagName","element","data","hasOwnProperty","attrMap","attributes","_element$attributes$i","name","strVal","newName","test","ElementToEntity","generator","isAllowedHref","url","createEntity","LINK","IMAGE","ContentGenerator","_this","options","undefined","Style","_Style","_x","toString","style","Entity","mutability","entityKey","toStringMap","contentStateForEntities","createFromBlockArray","blockStack","blockList","process","processBlockElement","contentBlocks","block","_concatFragments","concatFragments","textFragments","characterMeta","includeEmptyBlock","_trimLeadingNewline","trimLeadingNewline","_collapseWhiteSpace","collapseWhiteSpace","split","join","toList","getEntityMap","getBlockTypeFromTagName","blockTypes","parent","slice","ORDERED_LIST_ITEM","UNORDERED_LIST_ITEM","BLOCKQUOTE","HEADER_ONE","HEADER_TWO","HEADER_THREE","HEADER_FOUR","HEADER_FIVE","HEADER_SIX","CODE","ATOMIC","customBlockFn","nodeName","toLowerCase","customBlock","isCustomType","language","getAttribute","hasDepth","canHaveDepth","allowRender","hasSemanticMeaning","styleStack","entityStack","childNodes","Array","from","processNode","pop","processInlineElement","processText","customInlineFn","customInline","inlineCreators","add","addStyleFromTagName","elementStyles","processTextNode","node","nodeValue","replace","entity","charMetadata","create","seq","nodeType","_element","_tagName","getLastCreatedEntityKey","charAt","trimLeadingSpace","trimTrailingSpace","_trimLeadingSpace","_trimTrailingSpace","concat","_replaceTextWithMeta","_replaceTextWithMeta2","blockType","fragments","textFragment","styleSet","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","input","result","isArray","_i","_Object$keys","_key","match","stateFromElement"],"mappings":"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","sourcesContent":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport replaceTextWithMeta from './lib/replaceTextWithMeta';\nimport { CharacterMetadata, ContentBlock, ContentState, genKey } from 'draft-js';\nimport { List, Map, OrderedSet, Repeat, Seq } from 'immutable';\nimport { BLOCK_TYPE, ENTITY_TYPE, INLINE_STYLE } from 'draft-js-utils';\nimport { NODE_TYPE_ELEMENT, NODE_TYPE_TEXT } from 'synthetic-dom';\nimport { INLINE_ELEMENTS, SPECIAL_ELEMENTS, SELF_CLOSING_ELEMENTS } from './lib/Constants';\nvar DATA_URL = /^data:/i;\nvar NO_STYLE = OrderedSet();\nvar NO_ENTITY = null;\nvar EMPTY_BLOCK = new ContentBlock({\n  key: genKey(),\n  text: '',\n  type: BLOCK_TYPE.UNSTYLED,\n  characterList: List(),\n  depth: 0\n});\nvar LINE_BREAKS = /(\\r\\n|\\r|\\n)/g; // We use `\\r` because that character is always stripped from source (normalized\n// to `\\n`), so it's safe to assume it will only appear in the text content when\n// we put it there as a placeholder.\n\nvar SOFT_BREAK_PLACEHOLDER = '\\r';\nvar ZERO_WIDTH_SPACE = \"\\u200B\";\nvar DATA_ATTRIBUTE = /^data-([a-z0-9-]+)$/; // Map element attributes to entity data.\n\nvar ELEM_ATTR_MAP = {\n  a: {\n    href: 'url',\n    rel: 'rel',\n    target: 'target',\n    title: 'title'\n  },\n  img: {\n    src: 'src',\n    alt: 'alt',\n    width: 'width',\n    height: 'height'\n  }\n};\n\nvar getEntityData = function getEntityData(tagName, element) {\n  var data = {};\n\n  if (ELEM_ATTR_MAP.hasOwnProperty(tagName)) {\n    var attrMap = ELEM_ATTR_MAP[tagName];\n\n    for (var i = 0; i < element.attributes.length; i++) {\n      var _element$attributes$i = element.attributes[i],\n          name = _element$attributes$i.name,\n          value = _element$attributes$i.value;\n\n      if (typeof value === 'string') {\n        var strVal = value;\n\n        if (attrMap.hasOwnProperty(name)) {\n          var newName = attrMap[name];\n          data[newName] = strVal;\n        } else if (DATA_ATTRIBUTE.test(name)) {\n          data[name] = strVal;\n        }\n      }\n    }\n  }\n\n  return data;\n}; // Functions to create entities from elements.\n\n\nvar ElementToEntity = {\n  a: function a(generator, tagName, element) {\n    var data = getEntityData(tagName, element); // Don't add `<a>` elements with invalid href.\n\n    if (isAllowedHref(data.url)) {\n      return generator.createEntity(ENTITY_TYPE.LINK, data);\n    }\n  },\n  img: function img(generator, tagName, element) {\n    var data = getEntityData(tagName, element); // Don't add `<img>` elements with no src.\n\n    if (data.src != null) {\n      return generator.createEntity(ENTITY_TYPE.IMAGE, data);\n    }\n  }\n};\n\nvar ContentGenerator =\n/*#__PURE__*/\nfunction () {\n  // This will be passed to the customInlineFn to allow it\n  // to return a Style() or Entity().\n  function ContentGenerator() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ContentGenerator);\n\n    _defineProperty(this, \"contentStateForEntities\", void 0);\n\n    _defineProperty(this, \"blockStack\", void 0);\n\n    _defineProperty(this, \"blockList\", void 0);\n\n    _defineProperty(this, \"depth\", void 0);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"inlineCreators\", {\n      Style: function (_Style) {\n        function Style(_x) {\n          return _Style.apply(this, arguments);\n        }\n\n        Style.toString = function () {\n          return _Style.toString();\n        };\n\n        return Style;\n      }(function (style) {\n        return {\n          type: 'STYLE',\n          style: style\n        };\n      }),\n      Entity: function Entity(type, data) {\n        var mutability = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'MUTABLE';\n        return {\n          type: 'ENTITY',\n          entityKey: _this.createEntity(type, toStringMap(data), mutability)\n        };\n      }\n    });\n\n    this.options = options;\n    this.contentStateForEntities = ContentState.createFromBlockArray([]); // This represents the hierarchy as we traverse nested elements; for\n    // example [body, ul, li] where we must know li's parent type (ul or ol).\n\n    this.blockStack = []; // This is a linear list of blocks that will form the output; for example\n    // [p, li, li, blockquote].\n\n    this.blockList = [];\n    this.depth = 0;\n  }\n\n  _createClass(ContentGenerator, [{\n    key: \"process\",\n    value: function process(element) {\n      this.processBlockElement(element);\n      var contentBlocks = [];\n      this.blockList.forEach(function (block) {\n        var _concatFragments = concatFragments(block.textFragments),\n            text = _concatFragments.text,\n            characterMeta = _concatFragments.characterMeta;\n\n        var includeEmptyBlock = false; // If the block contains only a soft break then don't discard the block,\n        // but discard the soft break.\n\n        if (text === SOFT_BREAK_PLACEHOLDER) {\n          includeEmptyBlock = true;\n          text = '';\n        }\n\n        if (block.tagName === 'pre') {\n          var _trimLeadingNewline = trimLeadingNewline(text, characterMeta);\n\n          text = _trimLeadingNewline.text;\n          characterMeta = _trimLeadingNewline.characterMeta;\n        } else {\n          var _collapseWhiteSpace = collapseWhiteSpace(text, characterMeta);\n\n          text = _collapseWhiteSpace.text;\n          characterMeta = _collapseWhiteSpace.characterMeta;\n        } // Previously we were using a placeholder for soft breaks. Now that we\n        // have collapsed whitespace we can change it back to normal line breaks.\n\n\n        text = text.split(SOFT_BREAK_PLACEHOLDER).join('\\n'); // Discard empty blocks (unless otherwise specified).\n\n        if (text.length || includeEmptyBlock) {\n          contentBlocks.push(new ContentBlock({\n            key: genKey(),\n            text: text,\n            type: block.type,\n            characterList: characterMeta.toList(),\n            depth: block.depth,\n            data: block.data ? Map(block.data) : Map()\n          }));\n        }\n      });\n\n      if (!contentBlocks.length) {\n        contentBlocks = [EMPTY_BLOCK];\n      }\n\n      return ContentState.createFromBlockArray(contentBlocks, this.contentStateForEntities.getEntityMap());\n    }\n  }, {\n    key: \"getBlockTypeFromTagName\",\n    value: function getBlockTypeFromTagName(tagName) {\n      var blockTypes = this.options.blockTypes;\n\n      if (blockTypes && blockTypes[tagName]) {\n        return blockTypes[tagName];\n      }\n\n      switch (tagName) {\n        case 'li':\n          {\n            var parent = this.blockStack.slice(-1)[0];\n            return parent.tagName === 'ol' ? BLOCK_TYPE.ORDERED_LIST_ITEM : BLOCK_TYPE.UNORDERED_LIST_ITEM;\n          }\n\n        case 'blockquote':\n          {\n            return BLOCK_TYPE.BLOCKQUOTE;\n          }\n\n        case 'h1':\n          {\n            return BLOCK_TYPE.HEADER_ONE;\n          }\n\n        case 'h2':\n          {\n            return BLOCK_TYPE.HEADER_TWO;\n          }\n\n        case 'h3':\n          {\n            return BLOCK_TYPE.HEADER_THREE;\n          }\n\n        case 'h4':\n          {\n            return BLOCK_TYPE.HEADER_FOUR;\n          }\n\n        case 'h5':\n          {\n            return BLOCK_TYPE.HEADER_FIVE;\n          }\n\n        case 'h6':\n          {\n            return BLOCK_TYPE.HEADER_SIX;\n          }\n\n        case 'pre':\n          {\n            return BLOCK_TYPE.CODE;\n          }\n\n        case 'figure':\n          {\n            return BLOCK_TYPE.ATOMIC;\n          }\n\n        default:\n          {\n            return BLOCK_TYPE.UNSTYLED;\n          }\n      }\n    }\n  }, {\n    key: \"processBlockElement\",\n    value: function processBlockElement(element) {\n      if (!element) {\n        return;\n      }\n\n      var customBlockFn = this.options.customBlockFn;\n      var tagName = element.nodeName.toLowerCase();\n      var type;\n      var data;\n\n      if (customBlockFn) {\n        var customBlock = customBlockFn(element);\n\n        if (customBlock != null) {\n          type = customBlock.type;\n          data = customBlock.data;\n        }\n      }\n\n      var isCustomType = true;\n\n      if (type == null) {\n        isCustomType = false;\n        type = this.getBlockTypeFromTagName(tagName);\n      }\n\n      if (type === BLOCK_TYPE.CODE) {\n        var language = element.getAttribute('data-language');\n\n        if (language) {\n          data = _objectSpread({}, data, {\n            language: language\n          });\n        }\n      }\n\n      var hasDepth = canHaveDepth(type);\n      var allowRender = !SPECIAL_ELEMENTS.hasOwnProperty(tagName);\n\n      if (!isCustomType && !hasSemanticMeaning(type)) {\n        var parent = this.blockStack.slice(-1)[0];\n\n        if (parent) {\n          type = parent.type;\n        }\n      }\n\n      var block = {\n        tagName: tagName,\n        textFragments: [],\n        type: type,\n        styleStack: [NO_STYLE],\n        entityStack: [NO_ENTITY],\n        depth: hasDepth ? this.depth : 0,\n        data: data\n      };\n\n      if (allowRender) {\n        this.blockList.push(block);\n\n        if (hasDepth) {\n          this.depth += 1;\n        }\n      }\n\n      this.blockStack.push(block);\n\n      if (element.childNodes != null) {\n        Array.from(element.childNodes).forEach(this.processNode, this);\n      }\n\n      this.blockStack.pop();\n\n      if (allowRender && hasDepth) {\n        this.depth -= 1;\n      }\n    }\n  }, {\n    key: \"processInlineElement\",\n    value: function processInlineElement(element) {\n      var tagName = element.nodeName.toLowerCase();\n\n      if (tagName === 'br') {\n        this.processText(SOFT_BREAK_PLACEHOLDER);\n        return;\n      }\n\n      var block = this.blockStack.slice(-1)[0];\n      var style = block.styleStack.slice(-1)[0];\n      var entityKey = block.entityStack.slice(-1)[0];\n      var customInlineFn = this.options.customInlineFn;\n      var customInline = customInlineFn ? customInlineFn(element, this.inlineCreators) : null;\n\n      if (customInline != null) {\n        switch (customInline.type) {\n          case 'STYLE':\n            {\n              style = style.add(customInline.style);\n              break;\n            }\n\n          case 'ENTITY':\n            {\n              entityKey = customInline.entityKey;\n              break;\n            }\n        }\n      } else {\n        style = addStyleFromTagName(style, tagName, this.options.elementStyles);\n\n        if (ElementToEntity.hasOwnProperty(tagName)) {\n          // If the to-entity function returns nothing, use the existing entity.\n          entityKey = ElementToEntity[tagName](this, tagName, element) || entityKey;\n        }\n      }\n\n      block.styleStack.push(style);\n      block.entityStack.push(entityKey);\n\n      if (element.childNodes != null) {\n        Array.from(element.childNodes).forEach(this.processNode, this);\n      }\n\n      if (SELF_CLOSING_ELEMENTS.hasOwnProperty(tagName)) {\n        this.processText(\"\\xA0\");\n      }\n\n      block.entityStack.pop();\n      block.styleStack.pop();\n    }\n  }, {\n    key: \"processTextNode\",\n    value: function processTextNode(node) {\n      var text = node.nodeValue; // This is important because we will use \\r as a placeholder for a soft break.\n\n      text = text.replace(LINE_BREAKS, '\\n'); // Replace zero-width space (we use it as a placeholder in markdown) with a\n      // soft break.\n      // TODO: The import-markdown package should correctly turn breaks into <br>\n      // elements so we don't need to include this hack.\n\n      text = text.split(ZERO_WIDTH_SPACE).join(SOFT_BREAK_PLACEHOLDER);\n      this.processText(text);\n    }\n  }, {\n    key: \"processText\",\n    value: function processText(text) {\n      var block = this.blockStack.slice(-1)[0];\n      var style = block.styleStack.slice(-1)[0];\n      var entity = block.entityStack.slice(-1)[0];\n      var charMetadata = CharacterMetadata.create({\n        style: style,\n        entity: entity\n      });\n      var seq = Repeat(charMetadata, text.length);\n      block.textFragments.push({\n        text: text,\n        characterMeta: seq\n      });\n    }\n  }, {\n    key: \"processNode\",\n    value: function processNode(node) {\n      if (node.nodeType === NODE_TYPE_ELEMENT) {\n        // $FlowIssue\n        var _element = node;\n\n        var _tagName = _element.nodeName.toLowerCase();\n\n        if (INLINE_ELEMENTS.hasOwnProperty(_tagName)) {\n          this.processInlineElement(_element);\n        } else {\n          this.processBlockElement(_element);\n        }\n      } else if (node.nodeType === NODE_TYPE_TEXT) {\n        this.processTextNode(node);\n      }\n    }\n  }, {\n    key: \"createEntity\",\n    value: function createEntity(type, data) {\n      var mutability = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'MUTABLE';\n      this.contentStateForEntities = this.contentStateForEntities.createEntity(type, mutability, data);\n      return this.contentStateForEntities.getLastCreatedEntityKey();\n    }\n  }]);\n\n  return ContentGenerator;\n}();\n\nfunction trimLeadingNewline(text, characterMeta) {\n  if (text.charAt(0) === '\\n') {\n    text = text.slice(1);\n    characterMeta = characterMeta.slice(1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction trimLeadingSpace(text, characterMeta) {\n  while (text.charAt(0) === ' ') {\n    text = text.slice(1);\n    characterMeta = characterMeta.slice(1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction trimTrailingSpace(text, characterMeta) {\n  while (text.slice(-1) === ' ') {\n    text = text.slice(0, -1);\n    characterMeta = characterMeta.slice(0, -1);\n  }\n\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction collapseWhiteSpace(text, characterMeta) {\n  text = text.replace(/[ \\t\\n]/g, ' ');\n\n  var _trimLeadingSpace = trimLeadingSpace(text, characterMeta);\n\n  text = _trimLeadingSpace.text;\n  characterMeta = _trimLeadingSpace.characterMeta;\n\n  var _trimTrailingSpace = trimTrailingSpace(text, characterMeta);\n\n  text = _trimTrailingSpace.text;\n  characterMeta = _trimTrailingSpace.characterMeta;\n  var i = text.length;\n\n  while (i--) {\n    if (text.charAt(i) === ' ' && text.charAt(i - 1) === ' ') {\n      text = text.slice(0, i) + text.slice(i + 1);\n      characterMeta = characterMeta.slice(0, i).concat(characterMeta.slice(i + 1));\n    }\n  } // There could still be one space on either side of a softbreak.\n\n\n  var _replaceTextWithMeta = replaceTextWithMeta({\n    text: text,\n    characterMeta: characterMeta\n  }, SOFT_BREAK_PLACEHOLDER + ' ', SOFT_BREAK_PLACEHOLDER);\n\n  text = _replaceTextWithMeta.text;\n  characterMeta = _replaceTextWithMeta.characterMeta;\n\n  var _replaceTextWithMeta2 = replaceTextWithMeta({\n    text: text,\n    characterMeta: characterMeta\n  }, ' ' + SOFT_BREAK_PLACEHOLDER, SOFT_BREAK_PLACEHOLDER);\n\n  text = _replaceTextWithMeta2.text;\n  characterMeta = _replaceTextWithMeta2.characterMeta;\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction canHaveDepth(blockType) {\n  switch (blockType) {\n    case BLOCK_TYPE.UNORDERED_LIST_ITEM:\n    case BLOCK_TYPE.ORDERED_LIST_ITEM:\n      {\n        return true;\n      }\n\n    default:\n      {\n        return false;\n      }\n  }\n}\n\nfunction concatFragments(fragments) {\n  var text = '';\n  var characterMeta = Seq();\n  fragments.forEach(function (textFragment) {\n    text = text + textFragment.text;\n    characterMeta = characterMeta.concat(textFragment.characterMeta);\n  });\n  return {\n    text: text,\n    characterMeta: characterMeta\n  };\n}\n\nfunction addStyleFromTagName(styleSet, tagName, elementStyles) {\n  switch (tagName) {\n    case 'b':\n    case 'strong':\n      {\n        return styleSet.add(INLINE_STYLE.BOLD);\n      }\n\n    case 'i':\n    case 'em':\n      {\n        return styleSet.add(INLINE_STYLE.ITALIC);\n      }\n\n    case 'u':\n    case 'ins':\n      {\n        return styleSet.add(INLINE_STYLE.UNDERLINE);\n      }\n\n    case 'code':\n      {\n        return styleSet.add(INLINE_STYLE.CODE);\n      }\n\n    case 's':\n    case 'del':\n      {\n        return styleSet.add(INLINE_STYLE.STRIKETHROUGH);\n      }\n\n    default:\n      {\n        // Allow custom styles to be provided.\n        if (elementStyles && elementStyles[tagName]) {\n          return styleSet.add(elementStyles[tagName]);\n        }\n\n        return styleSet;\n      }\n  }\n}\n\nfunction hasSemanticMeaning(blockType) {\n  return blockType !== BLOCK_TYPE.UNSTYLED;\n}\n\nfunction toStringMap(input) {\n  var result = {};\n\n  if (input !== null && _typeof(input) === 'object' && !Array.isArray(input)) {\n    var obj = input;\n\n    for (var _i = 0, _Object$keys = Object.keys(obj); _i < _Object$keys.length; _i++) {\n      var _key = _Object$keys[_i];\n      var value = obj[_key];\n\n      if (typeof value === 'string') {\n        result[_key] = value;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction isAllowedHref(input) {\n  if (input == null || input.match(DATA_URL)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function stateFromElement(element, options) {\n  return new ContentGenerator(options).process(element);\n}\nexport default stateFromElement;"]},"metadata":{},"sourceType":"module"}